<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
	<insert id="addMember" parameterType="MemberDTO">
		insert into member(mem_num, mem_id, mem_passwd, mem_name, mem_birth)
		values (mem_seq.nextval,#{mem_id},#{mem_passwd},#{mem_name},#{mem_birth})
	</insert>
	
	<select id="login" parameterType="hashmap" resultType="MemberDTO">
		select mem_num, mem_id, mem_name, mem_birth from member
		where mem_id = #{mem_id} and mem_passwd = #{mem_passwd}
	</select>
	
	<select id="catchProfile" parameterType="string" resultType="MemberDTO">
		select mem_num ,mem_id, mem_passwd ,mem_name, to_char(mem_birth,'yyyy-mm-dd') mem_birth, mem_phone, mem_picture, mem_email_ck, mem_phone_ck, mem_case
		from member
		where mem_id = #{id}
	</select>
	
	<update id="updateMember" parameterType="MemberDTO">
		update member
		set mem_passwd = #{passwd},
		mem_phone = #{phone},
		mem_name = #{username}
	   where mem_id = #{userid}	
	</update>
	
	
	<update id="authenEmail" parameterType="string">
		update member
		set mem_email_ck = 'Y'
	   where mem_id = #{userid}	
	</update>
	
	<delete id="deleteMember" parameterType="string">
		delete member
		where mem_id = #{userid}
	</delete>
	
	<select id="boardSearch" parameterType="int" resultType="MemberDTO">
		select mem_num,mem_id, mem_name, mem_email_ck, mem_phone_ck, mem_picture
		from member, schedule_board
		where member.mem_num=schedule_board.scb_mem_num
		and scb_num=#{scb_num}
	</select>
</mapper>